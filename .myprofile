#!/usr/bin/env bash

# enable pyenv
eval "$(pyenv init -)"

# integrate with [jump](https://github.com/gsamokovarov/jump)
eval "$(jump shell)"

# You may need to manually set your language environment
# export LANG=en_US.UTF-8

# Preferred editor for local and remote sessions
if [[ -n $SSH_CONNECTION ]]; then
  export EDITOR='vim'
else
  export EDITOR='vim'
fi


# Fix for 'Could not open a connection to your authentication agent.'
# eval `ssh-agent -s`

# My own alias
# alias setJdk6='export JAVA_HOME=$(/usr/libexec/java_home -v 1.6)'
# alias setJdk7='export JAVA_HOME=$(/usr/libexec/java_home -v 1.7)'
# alias setJdk8='export JAVA_HOME=$(/usr/libexec/java_home -v 1.8)'

# alias setGradle211='export GRADLE_HOME=~/tools/gradle-2.11 && export PATH=$GRADLE_HOME/bin:$PATH'
# alias setGradle213='export GRADLE_HOME=~/tools/gradle-2.13 && export PATH=$GRADLE_HOME/bin:$PATH'
# alias setGradle33='export GRADLE_HOME=~/tools/gradle-3.3 && export PATH=$GRADLE_HOME/bin:$PATH'

# use gradle 2.13
# setGradle213

# update brew
alias bruu='brew update && brew upgrade && brew cleanup'
alias ycmBuild='pushd . && ~/.vim/plugged/YouCompleteMe/install.py  --clang-completer'
# allow clobber, otherwise sdkman will throw errors
set +o noclobber
## Enable vi mode in zsh
# https://dougblack.io/words/zsh-vi-mode.html

export VISUAL='vim'

# bindkey -M viins '^r' history-incremental-search-backward
# bindkey -M vicmd '^r' history-incremental-search-backward
zle -N edit-command-line
bindkey -M vicmd v edit-command-line
bindkey -v
#
bindkey '^P' up-history
bindkey '^N' down-history
bindkey '^?' backward-delete-char
bindkey '^h' backward-delete-char
bindkey '^w' backward-kill-word
bindkey '^r' history-incremental-search-backward

zle -N zle-keymap-select
export KEYTIMEOUT=1

## End of vi mode in zsh

#THIS MUST BE AT THE END OF THE FILE FOR SDKMAN TO WORK!!!
export SDKMAN_DIR="$HOME/.sdkman"
[[ -s "$HOME/.sdkman/bin/sdkman-init.sh" ]] && source "$HOME/.sdkman/bin/sdkman-init.sh"

source ~/.rvm/scripts/rvm
eval "$(rbenv init -)"

# fpath=($HOME/.zsh/gradle-completion $fpath)

export GRAPHVIZ_DOT=/usr/local/Cellar/graphviz/2.40.14
export CASSANDRA_HOME=$HOME/tools/apache-cassandra-3.11.0
export PATH=$PATH:$HOME/mybin:/usr/local/bin:/usr/local/sbin:/opt/local/bin:/opt/local/sbin:/bin:/sbin:/usr/bin:/usr/sbin:$GRAPHVIZ_DOT/bin:$HOME/.npm-packages/bin:$CASSANDRA_HOME/bin

export JAVA_HOME=`/usr/libexec/java_home -v 1.8`
export PATH=$JAVA_HOME/bin:$PATH
export GRADLE_HOME=~/tools/gradle-2.13
export PATH=$GRADLE_HOME/bin:$PATH
export TMPDIR=~/temp/temp_cache

# cheat settings
export CHEATCOLORS=true

source ~/.aliases
source ~/.zsh/zsh-interactive-cd/zsh-interactive-cd.plugin.zsh

[[ -s "/usr/local/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh" ]] && source "/usr/local/share/zsh-syntax-highlighting/zsh-syntax-highlighting.zsh"

BASE16_SHELL=$HOME/.config/base16-shell/
[ -n "$PS1" ] && [ -s $BASE16_SHELL/profile_helper.sh ] && eval "$($BASE16_SHELL/profile_helper.sh)"

# enables fzf for cli (history search, etc.)
[ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
[ -f ~/.workrc ] && source  ~/.workrc
